# 다형성

## 다형성의 개념

### 다형성이란?
- 동일한 기능에 대해 클래스에 따라 다른 기능을 구현하여 실행
- 상위 개념에 약속된 규약을 만들고 하위 개념에서 서로 다른 객체들을 같은 방식으로 사용


---

## 동적 바인딩

### 동적 바인딩이란??
- 컴파일 시에 내용이 결정되는 정적 바인딩과 달리 실행 시에 내용이 결정되는 유연한 구조
- 실행하면서 클래스의 관계가 결정되기 때문에 높은 확장성을 가짐

### 컴파일 (Compile)
- java 언어로 코딩된 코드들을 프로그램이 인식할 수 있는 바이트 코드(기계어)로 변환되는 과정

### 바인딩 (Binding)
- 하나의 클래스에서 다른 클래스를 사용하기 위해 이를 연결시키는 과정

### 정적 / 동적 바인딩
#### 정적 바인딩 (static binding)
- 컴파일 시에 내용이 결정되는 것
- 추후 변경 어려움
- 컴파일 시간에 많은 정보가 결정되므로 실행효율 증가
- 유동적으로 변경을 할 수가 없으므로 적응성 감소
- ex) 같은 패키지의 모든 클래스

#### 동적 바인딩 (dynamic binding)
- 실행 시에 내용이 결정되는 것
- 추후 변경에 용이
- 실행 시간에 많은 정보가 결정되므로 실행효율 감소
- 런타임에 자유롭게 성격이 바뀌므로 적응성 증가
- ex) 제품 구입후에도 부품 교환을 할 수 있는 조립 제품


### 캐스팅(Casting)
- 동적 바인딩 및 다형성을 지원하기 위해서 어떤 객체로 변경될 수 있을지 예측해야 함
- 실제 생성된 객체로 레퍼런스를 변경하기 위해 적절한 클래스로 형 변환을 하는 것

~~~
class Transport{
	public void move(){
		System.out.println("상위클래스인 Transport 입니다.");
	}
}

class Car extends Transport{
	@Override
	public void move() {
		System.out.println("하위클래스인 Car 입니다.");
	}	
}

Car newCar = new Car();
Transport t = (Transport)newCar;
t.move();
// 출력내용 : 하위클래스인 Car 입니다.
~~~

---

## 인터페이스

### 인터페이스란?
- 부모 클래스에서 모든 것을 정의하는 것이 아니라 자식 클래스에게 실제 구현을 강제하는 추상메소드를 포함
- 공통 기능에 대한 규약을 만들어 자식 클래스를 제어하기 위한 장치

### 인터페이스의 특징
- Java에서는 클래스를 여러 개 상속 받는 다중상속이 허용되지 않음
- 추상메소드 만을 가지며, 메소드로 기능을 표현할 순 있지만 변수는 표현할 수 없음

> interface의 경우에는 여러 개의 상위 인터페이스를 가지는 것이 가능

~~~
interface Transport{
	// 변수 선언할 수 없음
	
	// 모든 메소드는 구현내용이 없는 추상 메소드
	abstract void move();
	
	// abstract 키워드를 선언하지 않아도 interface는 컴파일시에 자동 추가
	void fillUp();
}
~~~

### 클래스 타입 확인
- 상위 클래스 또는 인터페이스를 참조타입으로 하여 객체를 생성하고 나서 실제로 객체를 사용하려고 할 때, 캐스팅이 필요할 수 있음
- 캐스팅 시에 맞지 않는 형 변환이라면 런타임 오류 발생
- `instanceof` 연산자로 클래스의 타입을 확인하여 알맞은 클래스로 캐스팅하도록 함

~~~
public void wash( Object obj ){
	if ( obj instanceof Car ) {
		// 인자가 Car 객체인 경우에 실행할 코드
		Car car = (Car) obj;
	} else if ( obj instanceof Train ) {
		// 인자가 Train 객체인 경우에 실행할 코드
		Train train = (Train) obj;
	}
}
~~~